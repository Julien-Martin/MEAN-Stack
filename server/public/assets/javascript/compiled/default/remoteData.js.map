{"version":3,"sources":["default/remoteData.ts"],"names":[],"mappings":"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","file":"remoteData.js","sourcesContent":["/**\n * Created by eqo on 6/28/16.\n */\n\nclass RemoteData {\n    public localData:           any;\n    public fetchedData:         any;\n    public fetchedSingleData:   any;\n\n    public lastResponse:   any;\n\n    public postUrl:     String;\n    public getUrl:      String;\n    public deleteUrl:   String;\n    public updateUrl:   String;\n\n    private _httpService;\n\n    constructor(postUrl: String, getUrl: String, deleteUrl: String, updateUrl: String, localDataForm: any, httpService){\n        this.deleteUrl      = deleteUrl;\n        this.getUrl         = getUrl;\n        this.updateUrl      = updateUrl;\n        this.postUrl        = postUrl;\n        this.localData      = localDataForm;\n        this._httpService   = httpService;\n        this.fetchedData    = [];\n    }\n\n    static formatData(data){\n        let myString = \"\";\n        for(var dataBit in data){\n            if(myString.length){\n                myString += \"&\";\n            }\n            myString += dataBit.toString() + \"=\" + JSON.stringify(data[dataBit]);\n        }\n        return myString;\n    }\n\n    httpPromise(settings){\n        return new Promise((res, rej) => {\n            this._httpService(settings).then(res, rej);\n        })\n    }\n\n    getAllData() {\n        return this.httpPromise({\n            method: 'GET',\n            url: this.getUrl,\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n            data: ''\n        }).then(response => {\n            this.lastResponse = response;\n            this.fetchedData = response.data;\n            return this.fetchedData;\n        });\n    }\n\n    getSingleData(id){\n        return this.httpPromise({\n            method: 'GET',\n            url: this.getUrl + \"/\" + id,\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n            data: \"\"\n        }).then(response => {\n            this.lastResponse = response;\n            this.fetchedSingleData = response.data;\n            return this.fetchedSingleData;\n        })\n    }\n\n    postToRemote(){\n        return this.httpPromise({\n            method: 'POST',\n            url: this.postUrl,\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n            data: RemoteData.formatData(this.localData)\n        }).then(response => {\n            this.lastResponse = response;\n            return this.getAllData();\n        })\n    }\n\n    updateRemote(id){\n        return this.httpPromise({\n            method: 'PUT',\n            url: this.updateUrl + \"/\" + id.toString(),\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n            data: RemoteData.formatData(this.localData)\n        }).then(response => {\n            this.lastResponse = response;\n            return this.getAllData();\n        })\n    }\n\n    deleteRemote(id){\n        return this.httpPromise({\n            method: 'DELETE',\n            url: this.deleteUrl  + \"/\" + id.toString(),\n            headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n            data: \"\"\n        }).then(response => {\n            this.lastResponse = response;\n            return this.getAllData();\n        })\n\n    }\n\n    clearLocal(){\n        for(var field in this.localData){\n            this.localData[field] = \"\";\n        }\n    }\n}"]}